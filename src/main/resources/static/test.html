<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¦´ìŠ¤í”Œë ˆì´ìŠ¤ API í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        .auth-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn-google {
            background: #4285f4;
            color: white;
        }
        .btn-kakao {
            background: #fee500;
            color: #000000;
        }
        .btn-naver {
            background: #03c75a;
            color: white;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.3s;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .token-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            word-break: break-all;
        }
        .response {
            background: #1e1e1e;
            color: #a9b7c6;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* ë¦´ìŠ¤ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .reel-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid #f0f0f0;
        }
        .reel-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        .reel-thumbnail {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: #f0f0f0;
            display: block;
        }
        .reel-thumbnail.loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .reel-content {
            padding: 15px;
        }
        .reel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        .reel-title {
            flex: 1;
        }
        .reel-title strong {
            display: block;
            color: #333;
            font-size: 15px;
            margin-bottom: 5px;
        }
        .reel-meta {
            color: #666;
            font-size: 12px;
            line-height: 1.5;
        }
        .reel-meta a {
            color: #667eea;
            text-decoration: none;
            word-break: break-all;
        }
        .reel-meta a:hover {
            text-decoration: underline;
        }
        .reel-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        /* ì¥ì†Œ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .place-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid #f0f0f0;
        }
        .place-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        .place-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            background: #f0f0f0;
        }
        .place-images.single {
            grid-template-columns: 1fr;
        }
        .place-images.double {
            grid-template-columns: repeat(2, 1fr);
        }
        .place-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background: #f0f0f0;
        }
        .place-image.loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        .place-content {
            padding: 15px;
        }
        .place-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        .place-info {
            color: #666;
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        .place-rating {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #fff3cd;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 600;
            color: #856404;
            margin-bottom: 10px;
        }
        .place-actions {
            display: flex;
            gap: 8px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        .badge-processing { background: #d1ecf1; color: #0c5460; }
        .badge-success { background: #d4edda; color: #155724; }
        .badge-warning { background: #fff3cd; color: #856404; }
        .badge-danger { background: #f8d7da; color: #721c24; }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .no-items {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 16px;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸ¬ ë¦´ìŠ¤í”Œë ˆì´ìŠ¤ API í…ŒìŠ¤íŠ¸</h1>

    <!-- 1. ì†Œì…œ ë¡œê·¸ì¸ -->
    <div class="section">
        <h2>1ï¸âƒ£ ì†Œì…œ ë¡œê·¸ì¸</h2>
        <div class="auth-buttons">
            <a href="/oauth2/authorization/google" class="btn btn-google">
                ğŸ”µ Google ë¡œê·¸ì¸
            </a>
            <a href="/oauth2/authorization/kakao" class="btn btn-kakao">
                ğŸ’¬ Kakao ë¡œê·¸ì¸
            </a>
            <a href="/oauth2/authorization/naver" class="btn btn-naver">
                ğŸŸ¢ Naver ë¡œê·¸ì¸
            </a>
        </div>
        <div id="tokenInfo" class="token-info" style="display:none; margin-top:20px;">
            <strong>âœ… ë¡œê·¸ì¸ ì„±ê³µ!</strong><br>
            <strong>Access Token:</strong> <span id="accessToken"></span><br>
            <strong>Refresh Token:</strong> <span id="refreshToken"></span>
        </div>
    </div>

    <!-- 2. ë‚´ ì •ë³´ ì¡°íšŒ -->
    <div class="section">
        <h2>2ï¸âƒ£ ë‚´ ì •ë³´ ì¡°íšŒ</h2>
        <button class="btn btn-primary" onclick="getMyInfo()">ë‚´ ì •ë³´ ê°€ì ¸ì˜¤ê¸°</button>
        <div id="myInfoResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>

    <!-- 3. ë¦´ìŠ¤ ì €ì¥ -->
    <div class="section">
        <h2>3ï¸âƒ£ ë¦´ìŠ¤ ì €ì¥ (ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œì‘)</h2>
        <div class="form-group">
            <label>ë¦´ìŠ¤ URL</label>
            <input type="text" id="reelUrl" placeholder="https://www.instagram.com/reel/xxxxx/"
                   value="https://www.instagram.com/reel/DCxGfL1zXXX/">
        </div>
        <button class="btn btn-primary" onclick="saveReel()">ë¦´ìŠ¤ ì €ì¥</button>
        <div id="saveReelResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>

    <!-- 4. ë‚´ ë¦´ìŠ¤ ëª©ë¡ -->
    <div class="section">
        <h2>4ï¸âƒ£ ë‚´ ë¦´ìŠ¤ ëª©ë¡ (ì¸ë„¤ì¼ í¬í•¨)</h2>
        <button class="btn btn-primary" onclick="getMyReels()">ë¦´ìŠ¤ ëª©ë¡ ì¡°íšŒ</button>
        <div id="myReelsGrid" class="cards-grid"></div>
        <div id="myReelsResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>

    <!-- 5. ë‚´ ì¥ì†Œ ëª©ë¡ -->
    <div class="section">
        <h2>5ï¸âƒ£ ë‚´ ì¥ì†Œ ëª©ë¡ (ì´ë¯¸ì§€ í¬í•¨)</h2>
        <button class="btn btn-primary" onclick="getMyPlaces()">ì¥ì†Œ ëª©ë¡ ì¡°íšŒ</button>
        <div id="myPlacesGrid" class="cards-grid"></div>
        <div id="myPlacesResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>

    <!-- 6. í†µê³„ ì¡°íšŒ -->
    <div class="section">
        <h2>6ï¸âƒ£ í†µê³„ ì¡°íšŒ</h2>
        <button class="btn btn-primary" onclick="getMyStats()">ë‚´ í†µê³„ ì¡°íšŒ</button>
        <div id="myStatsResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>

    <!-- 7. Internal API (ë””ë²„ê¹…ìš©) -->
    <div class="section">
        <h2>7ï¸âƒ£ Internal API (ë””ë²„ê¹…)</h2>
        <div class="form-group">
            <label>ë¦´ìŠ¤ ID</label>
            <input type="number" id="internalReelId" placeholder="1">
        </div>
        <div class="grid">
            <div>
                <button class="btn btn-primary" onclick="parseMetadata()" style="width:100%;">
                    1. ë©”íƒ€ë°ì´í„° íŒŒì‹±
                </button>
            </div>
            <div>
                <button class="btn btn-primary" onclick="extractAddresses()" style="width:100%;">
                    2. ì£¼ì†Œ ì¶”ì¶œ
                </button>
            </div>
            <div>
                <button class="btn btn-primary" onclick="createPlaces()" style="width:100%;">
                    3. ì¥ì†Œ ìƒì„±
                </button>
            </div>
        </div>
        <div id="internalResponse" class="response" style="margin-top:15px; display:none;"></div>
    </div>
</div>

<script>
    // í† í° ì €ì¥
    let accessToken = localStorage.getItem('accessToken');
    let refreshToken = localStorage.getItem('refreshToken');

    // URLì—ì„œ í† í° íŒŒë¼ë¯¸í„° í™•ì¸
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('accessToken')) {
        accessToken = urlParams.get('accessToken');
        refreshToken = urlParams.get('refreshToken');
        localStorage.setItem('accessToken', accessToken);
        localStorage.setItem('refreshToken', refreshToken);

        window.history.replaceState({}, document.title, window.location.pathname);
        showTokenInfo();
    }

    // í† í° ì •ë³´ í‘œì‹œ
    function showTokenInfo() {
        if (accessToken) {
            document.getElementById('tokenInfo').style.display = 'block';
            document.getElementById('accessToken').textContent = accessToken.substring(0, 50) + '...';
            document.getElementById('refreshToken').textContent = refreshToken ? refreshToken.substring(0, 50) + '...' : 'N/A';
        }
    }

    showTokenInfo();

    // API í˜¸ì¶œ í—¬í¼
    async function apiCall(url, method = 'GET', body = null) {
        const options = {
            method: method,
            headers: {
                'Content-Type': 'application/json',
            }
        };

        if (accessToken) {
            options.headers['Authorization'] = `Bearer ${accessToken}`;
        }

        if (body) {
            options.body = JSON.stringify(body);
        }

        const response = await fetch(url, options);

        if (response.status === 204) {
            return { status: 204, data: { message: 'ì‚­ì œ ì™„ë£Œ' } };
        }

        const data = await response.json();
        return { status: response.status, data };
    }

    // ì‘ë‹µ í‘œì‹œ í—¬í¼
    function showResponse(elementId, result) {
        const element = document.getElementById(elementId);
        element.style.display = 'block';
        element.textContent = JSON.stringify(result, null, 2);
    }

    // ìƒíƒœ ë°°ì§€ ìƒì„±
    function getStatusBadge(status) {
        const badges = {
            'PROCESSING': '<span class="badge badge-processing">ì²˜ë¦¬ì¤‘</span>',
            'METADATA_PARSED': '<span class="badge badge-processing">íŒŒì‹±ì™„ë£Œ</span>',
            'NO_ADDRESS': '<span class="badge badge-warning">ì£¼ì†Œì—†ìŒ</span>',
            'PLACE_FOUND': '<span class="badge badge-success">ì¥ì†Œìƒì„±</span>',
            'PLACE_NOT_FOUND': '<span class="badge badge-danger">ì¥ì†Œì—†ìŒ</span>',
            'FAILED': '<span class="badge badge-danger">ì‹¤íŒ¨</span>'
        };
        return badges[status] || `<span class="badge">${status}</span>`;
    }

    // 2. ë‚´ ì •ë³´ ì¡°íšŒ
    async function getMyInfo() {
        if (!accessToken) {
            alert('ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”!');
            return;
        }
        const result = await apiCall('/api/v1/users/me');
        showResponse('myInfoResponse', result);
    }

    // 3. ë¦´ìŠ¤ ì €ì¥
    async function saveReel() {
        if (!accessToken) {
            alert('ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”!');
            return;
        }
        const reelUrl = document.getElementById('reelUrl').value;
        const result = await apiCall('/api/v1/reels', 'POST', { reelUrl });
        showResponse('saveReelResponse', result);

        if (result.status === 201) {
            setTimeout(() => getMyReels(), 1000);
        }
    }

    // 4. ë‚´ ë¦´ìŠ¤ ëª©ë¡ (ì¸ë„¤ì¼ í¬í•¨)
    async function getMyReels() {
        if (!accessToken) {
            alert('ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”!');
            return;
        }
        const result = await apiCall('/api/v1/reels');

        // JSON ì‘ë‹µ í‘œì‹œ
        showResponse('myReelsResponse', result);

        // ì¹´ë“œ ê·¸ë¦¬ë“œë¡œ í‘œì‹œ
        const gridContainer = document.getElementById('myReelsGrid');

        if (result.status === 200 && result.data.content) {
            const reels = result.data.content;

            if (reels.length === 0) {
                gridContainer.innerHTML = '<div class="no-items">ğŸ“­ ì €ì¥ëœ ë¦´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }

            let html = '';

            reels.forEach(reel => {
                // ì¸ë„¤ì¼ URL (ì—†ìœ¼ë©´ placeholder)
                const thumbnail = 'https://www.geoje.go.kr/upload_data/photodb/thumb/2025010621142591973.jpg';

                html += `
                        <div class="reel-card">
                            <img src="${thumbnail}"
                                 alt="Reel Thumbnail"
                                 class="reel-thumbnail"
                                 onerror="this.src='https://www.geoje.go.kr/upload_data/photodb/thumb/2025010621142591973.jpg'>
                            <div class="reel-content">
                                <div class="reel-header">
                                    <div class="reel-title">
                                        <strong>ë¦´ìŠ¤ ID: ${reel.id} ${getStatusBadge(reel.status)}</strong>
                                        <div class="reel-meta">
                                            <a href="${reel.reelUrl}" target="_blank">ğŸ”— Instagramì—ì„œ ë³´ê¸°</a><br>
                                            ğŸ“… ${new Date(reel.createdAt).toLocaleString('ko-KR')}
                                        </div>
                                    </div>
                                </div>
                                ${reel.caption ? `<div style="margin-top: 10px; font-size: 13px; color: #555; max-height: 60px; overflow: hidden; text-overflow: ellipsis;">${reel.caption.substring(0, 100)}${reel.caption.length > 100 ? '...' : ''}</div>` : ''}
                                <div class="reel-actions">
                                    <button class="btn btn-danger btn-small" onclick="deleteReel(${reel.id})" style="width: 100%;">
                                        ğŸ—‘ï¸ ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
            });

            gridContainer.innerHTML = html;
        } else {
            gridContainer.innerHTML = '<div class="no-items">âŒ ë¦´ìŠ¤ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨</div>';
        }
    }

    // 4-1. ë¦´ìŠ¤ ì‚­ì œ
    async function deleteReel(reelId) {
        if (!confirm(`ë¦´ìŠ¤ ID ${reelId}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì—°ê²°ëœ ì¥ì†ŒëŠ” ìœ ì§€ë©ë‹ˆë‹¤)`)) {
            return;
        }

        const result = await apiCall(`/api/v1/reels/${reelId}`, 'DELETE');

        if (result.status === 204) {
            alert('âœ… ë¦´ìŠ¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            getMyReels();
        } else {
            alert('âŒ ë¦´ìŠ¤ ì‚­ì œ ì‹¤íŒ¨: ' + JSON.stringify(result.data));
        }
    }

    // 5. ë‚´ ì¥ì†Œ ëª©ë¡ (ì´ë¯¸ì§€ í¬í•¨)
    async function getMyPlaces() {
        if (!accessToken) {
            alert('ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”!');
            return;
        }
        const result = await apiCall('/api/v1/places');

        // JSON ì‘ë‹µ í‘œì‹œ
        showResponse('myPlacesResponse', result);

        // ì¹´ë“œ ê·¸ë¦¬ë“œë¡œ í‘œì‹œ
        const gridContainer = document.getElementById('myPlacesGrid');

        if (result.status === 200 && result.data.content) {
            const places = result.data.content;

            if (places.length === 0) {
                gridContainer.innerHTML = '<div class="no-items">ğŸ“­ ì €ì¥ëœ ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }

            let html = '';

            places.forEach(place => {
                // ì´ë¯¸ì§€ ê°œìˆ˜ì— ë”°ë¼ ê·¸ë¦¬ë“œ í´ë˜ìŠ¤ ê²°ì •
                const imageCount = place.images ? place.images.length : 0;
                let gridClass = '';
                if (imageCount === 1) gridClass = 'single';
                else if (imageCount === 2) gridClass = 'double';

                html += `
                        <div class="place-card">
                            ${imageCount > 0 ? `
                                <div class="place-images ${gridClass}">
                                    ${place.images.slice(0, 3).map(img => `
                                        <img src="${img}"
                                             alt="${place.name}"
                                             class="place-image"
                                             onerror="this.src='https://www.geoje.go.kr/upload_data/photodb/thumb/2025010621142591973.jpg'>
                                    `).join('')}
                                </div>
                            ` : `
                                <img src="https://via.placeholder.com/400x150?text=No+Image"
                                     alt="No Image"
                                     class="place-image"
                                     style="width: 100%; height: 150px;">
                            `}
                            <div class="place-content">
                                <div class="place-name">ğŸ“ ${place.name}</div>
                                <div class="place-info">
                                    ğŸ  ${place.address}
                                </div>
                                ${place.rating ? `
                                    <div class="place-rating">
                                        â­ ${place.rating.toFixed(1)}
                                        <span style="color: #999;">(ë¦¬ë·° ${place.reviewCount || 0}ê°œ)</span>
                                    </div>
                                ` : ''}
                                <div class="place-actions">
                                    <button class="btn btn-danger btn-small" onclick="deletePlace(${place.id})" style="width: 100%;">
                                        ğŸ—‘ï¸ ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
            });

            gridContainer.innerHTML = html;
        } else {
            gridContainer.innerHTML = '<div class="no-items">âŒ ì¥ì†Œ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨</div>';
        }
    }

    // 5-1. ì¥ì†Œ ì‚­ì œ
    async function deletePlace(placeId) {
        if (!confirm(`ì¥ì†Œ ID ${placeId}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì—°ê²°ëœ ë¦´ìŠ¤ëŠ” ìœ ì§€ë©ë‹ˆë‹¤)`)) {
            return;
        }

        const result = await apiCall(`/api/v1/places/${placeId}`, 'DELETE');

        if (result.status === 204) {
            alert('âœ… ì¥ì†Œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
            getMyPlaces();
        } else {
            alert('âŒ ì¥ì†Œ ì‚­ì œ ì‹¤íŒ¨: ' + JSON.stringify(result.data));
        }
    }

    // 6. í†µê³„ ì¡°íšŒ
    async function getMyStats() {
        if (!accessToken) {
            alert('ë¨¼ì € ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”!');
            return;
        }
        const result = await apiCall('/api/v1/users/me/stats');
        showResponse('myStatsResponse', result);
    }

    // 7. Internal API
    async function parseMetadata() {
        const reelId = document.getElementById('internalReelId').value;
        const result = await apiCall(`/api/v1/internal/reels/${reelId}/parse-metadata`, 'POST');
        showResponse('internalResponse', result);
    }

    async function extractAddresses() {
        const reelId = document.getElementById('internalReelId').value;
        const result = await apiCall(`/api/v1/internal/reels/${reelId}/extract-addresses`, 'POST');
        showResponse('internalResponse', result);
    }

    async function createPlaces() {
        const reelId = document.getElementById('internalReelId').value;
        const extractResult = await apiCall(`/api/v1/internal/reels/${reelId}/extract-addresses`, 'POST');
        if (extractResult.status === 200 && extractResult.data.addresses) {
            const createResult = await apiCall(
                `/api/v1/internal/reels/${reelId}/create-places`,
                'POST',
                { addresses: extractResult.data.addresses }
            );
            showResponse('internalResponse', createResult);
        } else {
            showResponse('internalResponse', extractResult);
        }
    }
</script>
</body>
</html>